language: node_js
node_js:
- '6'
sudo: required
script: npm test
env:
  global:
  - CF_STAGING_APP=cognitive-event-finder
  - CF_STAGING_API=https://api.ng.bluemix.net
  - secure: "Tz1zdrbasAwd5dk8u1j2F5tnH1UlOXnXPKfK6P/oYm++kSyX6mGWtdGCkx5bAe4AwMKd/k5tZW915jBmg3h96+JPZEPxWL/vTAnbhgwrFk7Uw7s99NzDdscsWbkz/k3IkjU737qsR4pkpbCUTduWSSffMaWNpYDZCIRUz5Pft6iscenzefGiijpdZ0Kl+8nXfyxs8MiOr7IDtW8MTWGQoA+5MeslgqQRu+yCiitWGt2mT5WrwIeAfg15cxwvxVziUoXnxErt/l5xpdYS5YSS96UEF3y4PDWm5c7os/v+7uZ6hPjrSeBJ+DWl24pcRC5aQoP6rcicybcz3pMfY2oxhtk4s9EKuKB45tvdE+fR9KXhNr4vp+6hHYHT90F2ZIBRUUT2hFtuXqG1MKpRejvVyWaX2dJcCUa1AzvpcXY/rY5OoHjH+jpuGXdR7m54cW4Zyqh0qJwSp9/Xvoo28Y0SQZ+uRrMxaktJkdJDpa+0s3Y1bCGtTH/VQWY30W78F1kJHRkaHTKeRSbo9A+Npup15RSzuXIBWnblGI6WWwyMzQFYnLV/4qza8oTQBytnr3RJ6EVW5WNSsLBs1p0NLGfc9pHywR6+wkqIFJJYTREz9MZYs8jhLPKJLuUX9011hjMacM1k6hBIPlVi7sDNgi0BsgLVZvX7oUdFKbIS7OEwMxQ="
  - secure: "GxScXX7ktDscDPs/JgZai0X8NDiZqWA3ljqFWuhiK6XNbTT9ExxZyK9lAl9MDvi2TSsrWlHeFcEYDQUqn39Gycv6WitdR7YVvszRHSsR2aUfHbHZhnl6k3evJkdVq+3Y4LfWIY8MgeN3uY2iilu3KQnymCZnVKPciWT76nYbXrYb0jp9c+RhLCmOWXa/vHYUPXWn5PZom/kVfo1St7MWk1IkQtK7NkdDDIGK/DwPqHtGGfWIOP3Tks4QGWkhEpEbExfKrxR8ds3yW+wfcEscd3zWQz7OmkvgPcSwUYHC7veNFH/wi0+DUFa9+u3OTkHjEfoRlVhmnVN29hMKCBKk+8TlN7owjF3Km8vNj3/iZXoI4L7k/rXRkbJfOXkjwfjrjvrEob/QTBAzEiADO+jdFshGK8kfn4ZD2cmeJ36po74+TP8AbRSAYWuG8UW0kqGg9fEoeDZg1PcEdaJAMZaj/xVEgAUMOFA5BwvxepXe8dKr/AJFPuIFYGuo30VkiCDcSswAgF525dMsEGNe0k5Tay8nMd2RgwSq85AlfnJg8HppPlYdcPdP4vWY2f/AEeb2nTHgBBHjaE0xqJPgc1vNX6WmaZxtfaSaQzQCgKJnlc3BzsHx0L0VydZK8SQIkhE23WMYDhVXGPXdpvVk29DWxv4j5P/U/mAcl8MgYFjfA9w="
  - secure: "aSunwiCCnnWBA4+qrs7l4Tr6bLfpaMlgktaZU/QtD00qoQsoJni7uA6BTyxczv3SGesrd5kuvgfhRzbggIf8RPcvQJ6UzT1SOLfmTURFHmRQqwx/ZwFHiIHmTsaENGznS93SKJSZB7aD+USffvtvhAg8YiLOnokOqh3nSdo91T5LtzeY0NlkXM3zQf2IjQgC6Ay7576bEqC+KWi39vU4shFvdfctjxQ56LoJhoER1059uJnf8sE/bxkURsrROAT57PfyaK75zA3wdRNQ57rme1hwEoTEbUC0tz20Nmaf6n8DNbNGMSrPAQXwrSmpbcS2eSWBEJ0mkHZamou4PTDCwkydx8mcm+w5ScsR0gDZgjMh+xYx/LmEtopb5Av7ntOOkKQ4nwY+VvNENmsTl/223cG8FJ1XbnrNZsB47xjypP0kJcqnrAkQrs+4TZtm8Y0BQstNjv8L+DfHw1UxdliTLRui/dggjXHcRyHr7raq6oZtR8mCEyutuEjW/GcowaBCwOZE9o8dCFOKoP5YV7EMh4YhGfO4+5NKIDwotYbTeVAOMAVysjHdih2XRmJbvDeDmMoyVCv6DpOBv+GSTjV+KtITFhkIVvL07545tgId17kuHS84kkjDmcm3U3VBaGoXvhArpwuo3vLP5Gb2awJ8SZdgnYKZXiIb6siAiJcTVhA="
  - secure: "M/SNyHdWU4ZcmMLInXeDeTHTu2NAqjDgCkgcOr6pcjMhHcqF2XVjp+ID8Ukpg5uegfH2i/SAR6L+ruu3PrdCsaoh4l7Y/9TNxWCS9pEmiBfjYseNWE/W7ilJKZpMY4Z3niox4psC8B/BeRexdjPAuSXx82lpCOikTvHqrRxutx9CEZ4U8dkBStMjXNJpVt8kAnTNNqW9Rvk9rYyeGWEpoU7aeXUwy1bYPJfbHyVMNk2VhZWYubaAWbYE8BXWTRibd/36VxaQ4LsZPAjMdV3PZ+cznwDezOH8J2pEjn3P9WZnJKklYRqg5LuyV3eUGD0MexTDWRkUACgDon/KBR2Yy+nmKDy5mgfSv/YyJ7Cb1VUKJkx06pY4fJwd+qPnDgXt3lLonT05Piyh2SizzqUNd819qTdlhXIuKgw2SeDbaD/hbZDN733goZ9r6tTjEiTk9S0XR4czgyXG8TsqA/he1rBMKipMf0Q9tTgxg4WNVzCL6mYwAgZ7aI6eA504LhZUHhnz2kQ8hCTOJgJl/Y05z55qa/1PSmlFsUGdFYBc8nO9wdhLsJqKIBfgAH/+AxOeAZ0/xtZHrx10lCR3gpBcznOlaed8Plmcb5W2civuApJJbCCkfuo7YVV+HPt10VnWgZAsRQevxKyyRlAmL8WQI5rzSGq/cZlqejFzaraf2tc="
  - CF_PROD_API=https://api.ng.bluemix.net
  - CF_PROD_APP=cognitive-event-finder
  - secure: "W5D2Poyk+FUlH9C5zade3iEqbYfiaziaKGlJkuNfU405J4FeilJZFlSSK6ltAs1OnIb2l5l2jvRVrwVMrnQlTo1nFTp4PubYhU4GgYidq7vEhvPLroPrNViA83HgeEQbXFJjt+qfHBgl4wE2E94g0zB0MQOM/uQx4nPpcms2QVxpKE9oKjvCt62XAPFAWRemEcNgaHkXtX3VM+AdS02bSi6pOFk+UAZ5LpaPKZ3c73vcSW0OC3MEei9BTldquqECgzei4W73Mk8P7Rn4EU3PDiGDGzXNwfcAaG0hsn8yiO2aba1MM5NDjoOj7swZXFQUIWUQAt1thC8j2DqxFQY8/Lc+FBh5naEnmzFStGVUl6lcGzhJCTn0ZxzctRdqUoeRS0CToadSLcyIN4al6a3GVODC7xf89ffR8T26ZlUTWVvgykqqOU40XKzWNWH91s+9tOdhXK+93s516tVwaHXl4Q5T10GuP3PJ50k+uBUj9uSsmkeQrXyXHKmyeu0oKe+2gIG8rYrEe2E5hN8PxlrNkBNCRMDpWgl2qflOrFC8s0IfbznZmmUu3wPRoAYYalxWrPjQq8mT2f8A3orK/DKaGCUlIi+qAcnLEz4PbfFSnUB3/NOSnQj4lJw4iH+IXSGTnDFb4r38SNuxQe8QD4zqcy2ZC1ovvXP2e/lSLePjFH4="
  - secure: "Lger+DK5O/oQ5whS2wZrQQLn6wl0NM4jb8LxxXWsm1dHrG8bE6Xadv+ySd+VB2s9DwrJRBOBVqBYMfXVskVTjXbajjfPLGFeapAeLyVEhe0tzW0DfnmdHy9C1tMi816+RB3E03g05wy2T5K6ob1dAJCpcE397o1AZpVfE4iAjUg8fRw6ZfkFinnq8m2osAn9RG7HoXLhjk+v0/0ZUx5Bi+XbyvsCw92X8o/YIJGd7isxyiZuKhG5XSkh7gGibbYbQ/rIL5xKozYHHKqLISoTevcIFwl0v49dungWkswU+lxFtGjQ3o7Z/ueHRU/ZbZ4Ogut9OoMW5fpOhgYL/eo6WBqiOWbXmcaY1uqmQ44Sqdf7hejg1zHMzEEANUy8L90s2aQaJTAwFWIVfibcNS4fkzO8b9sBvoFLf9zQ+M8UWu+VyDNCTzwoQrlB8ItobZoJ588FbymD4MuGNfcYNhh/L/hhtlrxNsqNh7MIGSG/vlhAikHM9DI87eHvIkWX+vSXMe/4BJjstLiFFpwAHHa0EYhtNJydnsQz+PnpMm8pF/SiWmHOg189/9ZUqhHgsdzRZwea7wx58/0q6dCQNME5pWqe6ydigEtgrQibX3OUNXj+FxlAfcWy8KH61uJO5nDQsHF/J7+IxpL9h5KLFve98Z79L14TE2MDb6+jEjp7ScA="
  - secure: "vv8yiK8SNGkJYPsM+aSm0EpJF3WhBJ4+MR/3bohG5jBTJsOfeutK9ZOmWrxv+8eJAmZQiAifFOsJ2Fd6j9+o65lLkTdFX7EfCOOII9bPHmVaTF+TVgWNQTlFWK1MG0VeeGVn3A/g9IKyW4SXHfRrWA4QH+JyaBlm1e2H+QySM+Cw9uAVtSXETgs2HQdJK5x08vcOG6UOU77vQErOrL3KhhQnC7bIzEc3FGtlr0USrSpbnSplvtZSUBeyyU9BVQAl7y7Gf4OFKwRHdlo+ghHnMAn2d5yBNsHhnrDpWZioBYskoeE2sfo2eoyLimcsNk4erao6vi6nyUI4actJkjl/mJaUANR5H3g/w7lKfBql9pxwTvFfOPmKQ7f/rYSR1Uby3w7OR7VkXccFcUgQKkXkP4E84p/5rGpP/0Trucl1WN8fZWTYK5205Mrm5/ECqdYhzX4kQlptdpmL06ccdkIP4L8FOHiZ8a4Jh6brbb2sQ2SbWxwcimYESurm7reCTNgezI6tRZH3W9wTTri5GdlcPaZOt9MSTXV4gzPngPKfOg00B1Krmn+Vmg6VAXeXfbIAUfdFlh6VjP6S+ZxQfRv3Ox1c66+yYz8snkOp4c9Sy7PSXit9LKtddkULj+Mb1DGUeiC7cSgQ0v8ouuXtGOl9smH7e6zAs93ztm1pXG5S7VE="
  - secure: "rjGZ4XB1iqPFmY+EOa49nq1hF5NYyGpPRYlO6ChOCtkDok2+stYBqIG7bAr7eRsbEOgFoBD4UEIzsBAg/AQG+VDm13yO21IeZm27kTKuB4Sa+fLFW2vYBPDlXB8x+/C0l6gU2AbtEQj1Fper6bDTFuHnl8c/tAIhtI7+UsG9nraMzgLMX5bSOmvF0YdTokPfBE9KEPutmfvS+rZWr9JSaag30jdVTXnD0UzKi5mT8S0GJ6LTC2q+bzGqmhaOd2SeimcrkGzXBZhkWr9LW1jYmUl0FC9cseF6DfTUg9QCE2m5OQwX68CsXo1zG2UbclrRmlPV5Pk9VBOyiVfIVaalZlTwkF/JeChvqTCqCsxU34dR79K81HT8y0R05VZhGdNJR1qAG2TB8MaEwkBiGqSjY7/M+Dti2IOjZ1Btq3GhI1hYEevygcrcdt2NsX61m9IzNzuXyOzsfsSIV9rKn+4J/DE9uDl0zgOC9yXljLzdJSE2EihwGpesNS52D+Qtg9IXIakx9yb2Jd0pvC8ezVGgbGWFHh2mdTqHnE85D9Gtdi6zqsbVYcOZ2UQlcvFaLEJ3dJ9wnCVc9cj10KtHqRXLMhI5kqEh2wIFM1BkIb3JEZIGtWtSQpeI1OZ9jE53Lo1S4hbe5dzdJ6s3yNbdCgToDjWTJB+LmKOTZLacXUdb+qM="
deploy:
  - provider: script
    script: deploy/cf-blue-green-staging.sh
    on:
      repo: ibm-cds-labs/cognitive-event-finder
      branch: dev
  - provider: script
    script: deploy/cf-blue-green-prod.sh
    on:
      repo: ibm-cds-labs/cognitive-event-finder
      branch: master